<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Th√™m S√¢n M·ªõi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style> #map-picker { height: 400px; width: 100%; border: 2px solid #ccc; margin-top: 10px; cursor: crosshair; } </style>
</head>
<body class="bg-light container mt-5">
    <div class="card shadow">
        <div class="card-header bg-primary text-white"><h4>‚ûï Th√™m S√¢n B√≥ng M·ªõi</h4></div>
        <div class="card-body">
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6 mb-3"><label>T√™n S√¢n:</label>{{ form.ten_san }}</div>
                    <div class="col-md-6 mb-3"><label>Gi√° Ti·ªÅn:</label>{{ form.gia_tien }}</div>
                </div>
                <div class="mb-3"><label>ƒê·ªãa Ch·ªâ:</label>{{ form.dia_chi }}</div>
                <div class="mb-3"><label>H√¨nh ·∫£nh s√¢n:</label>{{ form.hinh_anh }}</div>

                <h5 class="text-primary mt-3">üìç Ch·ªçn v·ªã tr√≠ tr√™n b·∫£n ƒë·ªì</h5>
                <div id="map-picker"></div>
                
                <div class="row mt-2">
                    <div class="col-6"><label>Vƒ© ƒë·ªô:</label>{{ form.vi_do }}</div>
                    <div class="col-6"><label>Kinh ƒë·ªô:</label>{{ form.kinh_do }}</div>
                </div>

                <div class="mt-4 text-center">
                    <button type="submit" class="btn btn-success">L∆∞u S√¢n</button>
                    <a href="{% url 'home' %}" class="btn btn-secondary">Quay l·∫°i</a>
                </div>
            </form>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        var map = L.map('map-picker').setView([10.8231, 106.6297], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        var marker;
        map.on('click', function(e) {
            var lat = e.latlng.lat, lng = e.latlng.lng;
            if (marker) map.removeLayer(marker);
            marker = L.marker([lat, lng]).addTo(map);
            document.getElementById('txtLat').value = lat.toFixed(6);
            document.getElementById('txtLng').value = lng.toFixed(6);
        });
    </script>
</body>
</html>